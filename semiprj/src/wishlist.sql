DROP TABLE WISHLIST
CASCADE CONSTRAINTS;

DROP SEQUENCE SEQ_WISHLIST;

CREATE TABLE WISHLIST(
    SEQ NUMBER(10) PRIMARY KEY ,
    ID VARCHAR2(50) NOT NULL,
    SEQ_RESTAURANT NUMBER(10) NOT NULL,
    WDATE DATE
);

CREATE SEQUENCE SEQ_WISHLIST
START WITH 1
INCREMENT BY 1;

ALTER TABLE WISHLIST
    ADD CONSTRAINT FK_WISHLIST_ID FOREIGN KEY (ID)
        REFERENCES MEMBER(ID);

ALTER TABLE WISHLIST
    ADD CONSTRAINT FK_WISHLIST_SEQ_RESTAURANT FOREIGN KEY (SEQ_RESTAURANT)
        REFERENCES RESTAURANT_BBS(SEQ);
        
INSERT INTO WISHLIST VALUES (SEQ_WISHLIST.nextval, 'root', 1, SYSDATE);

SELECT * FROM WISHLIST;
        
SELECT R.SEQ, W.ID, R.NAME, R.TEL, R.LOCATION, R.OPERATING_TIME, R.KINDS, R.SCORE, R.LIKECOUNT, R.HATECOUNT, R.READCOUNT, R.TITLE, R.REVIEW, R.WDATE, R.DEL, R.FILENAME, R.NEWFILENAME
FROM WISHLIST W, RESTAURANT_BBS R
WHERE W.ID = R.ID
	AND W.ID = 'root';

SELECT C.SEQ, C.ID, C.REF, C.STEP, C.DEPTH, C.TITLE, C.CONTENT, C.WDATE, C.TYPE, C.DEL 
FROM WISHLIST W, CS_BBS C 
WHERE W.ID = C.ID 
	AND W.ID = 'root'
ORDER BY REF DESC, STEP ASC ;

UPDATE MEMBER  M SET M.PWD='bbb', M.EMAIL='wnsgmlrh@naver.com', M.ADDR='마포구' 
FROM WHISHLIST W, MEMBER
WHERE W.ID = M.ID 
AND W.ID = 'aaa';

UPDATE MEMBER SET M.PWD='bbb', M.EMAIL='wnsgmlrh@naver.com', M.ADDR='마포구' 
FROM WISHLIST W, MEMBER M 
WHERE W.ID = M.ID 
AND W.ID = 'aaa';

UPDATE MEMBER M INNER JOIN WISHLIST W 
ON W.ID = M.ID
SET M.PWD='bbb'
WHERE W.ID = 'root';

SELECT * 
FROM WISHLIST W, MEMBER M
WHERE W.ID = M.ID
	AND W.ID = 'root';

SELECT * FROM WISHLIST;

SELECT C.SEQ, C.SEQ_RESTAURANT, W.ID, C.CONTENT, C.WDATE, C.DEL, C.REPORT_IT, C.STEP, C.DEPTH 
FROM WISHLIST W, COMMENT_BBS C
WHERE W.ID = C.ID 
AND W.ID= 'root'
ORDER BY REPORT_IT DESC, STEP ASC;

SELECT C.SEQ, C.SEQ_RESTAURANT, W.ID, C.CONTENT, C.WDATE, C.DEL, C.REPORT_IT, C.STEP, C.DEPTH 
FROM WISHLIST W, COMMENT_BBS C
WHERE W.ID = C.ID 
AND ID='root' 
ORDER BY REF DESC, STEP ASC ;

SELECT R.SEQ, W.ID, R.NAME, R.TEL, R.LOCATION, R.OPERATING_TIME, R.KINDS, R.SCORE, R.WISH, R.LIKECOUNT, R.HATECOUNT, R.READCOUNT, R.TITLE, R.REVIEW, R.WDATE, R.DEL, R.FILENAME, R.NEWFILENAME 
FROM WISHLIST W, RESTAURANT_BBS R
WHERE W.ID = R.ID
AND W.ID = 'root';

SELECT R.SEQ, W.ID, R.NAME, R.TEL, R.LOCATION, R.OPERATING_TIME, R.KINDS, R.SCORE, R.WISH, R.LIKECOUNT, R.HATECOUNT, R.READCOUNT, R.TITLE, R.REVIEW, R.WDATE, R.DEL, R.FILENAME, R.NEWFILENAME 
FROM WISHLIST W, RESTAURANT_BBS R
WHERE W.ID = R.ID
AND R.WISH = 1;